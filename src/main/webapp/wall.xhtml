<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	template="/WEB-INF/templates/default.xhtml">
	<ui:define name="content">
		<h1>Seam Social client Example</h1>

		<h:form>
				<div>
					<img src="#{identity.user.userProfile.profileImageUrl}"/> Hello, <h:outputText value="#{identity.user.userProfile.fullName}!"/> you are now connected via your <h:outputText value="#{identity.user.serviceName}"/> account.
					
					<h:commandButton action="#{identity.logout}" value="logout"/>
				</div>
			
				<div>Tell us (and your followers, #{identity.user.serviceName} overlords and the whole world) what you think!</div>
				
				<div>
					<h:inputText value="#{socialMessages.message}"/>
					<h:commandButton action="#{socialMessages.post}" value="Send"/>
					<h:selectBooleanCheckbox value="#{socialMessages.postToTwitter}" />
				</div>
		</h:form>		
		
		<h3>Latest FooBars</h3>
		
		<h:form>
			<div class="messages">
			<ui:repeat var="m" value="#{socialMessages.messages}">
				<div class="message">
					<div class="messageHeader"><img src="#{m.user.profileImageUrl}"/>
						<h:link value="#{m.user.fullName}" outcome="user">
							<f:param name="user" value="#{m.user.screenName}" />
						</h:link>
						via <h:outputText value="#{m.user.serviceName}"/>
						on
						<h:outputText value="#{m.date}" >
              				<f:convertDateTime type="date" dateStyle="long"/>
           				</h:outputText> 
						
						<h:commandButton rendered="#{!friendBean.isFriend(m.user.oauthId)}" value="Follow" action="#{friendBean.follow(m.user.oauthId)}" />
					</div>
					<div classs="messageBody"><h:outputText value="#{m.message}"/></div>
				</div>
			</ui:repeat>
			</div>
		</h:form>
	</ui:define>
</ui:composition>
